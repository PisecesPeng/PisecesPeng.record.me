## 访问器模式示例

> 解决双分派问题.

> 列出访问器模式写法(非仅此写法):

```java
public abstract class ResourceFile {

  protected String filePath;

  public ResourceFile(String filePath) {
    this.filePath = filePath;
  }

  abstract public void accept(Visitor vistor);

}

public class PdfFile extends ResourceFile {

  public PdfFile(String filePath) {
    super(filePath);
  }

  @Override
  public void accept(Worker worker) {
    worker.do(this);
  }

}
//...PPTFile、WordFile跟PdfFile类似，这里就省略了...

public interface Worker {
  void do(PdfFile pdfFile);
  void do(PPTFile pdfFile);
  void do(WordFile pdfFile);
}

public class Extractor implements Worker {

  @Override
  public void do(PPTFile pptFile) {
    System.out.println("Extract PPT.");
  }

  @Override
  public void do(PdfFile pdfFile) {
    System.out.println("Extract PDF.");
  }

  @Override
  public void do(WordFile wordFile) {
    System.out.println("Extract WORD.");
  }

}

public class Compressor implements Worker {

  @Override
  public void do(PPTFile pptFile) {
    System.out.println("Compress PPT.");
  }

  @Override
  public void do(PdfFile pdfFile) {
    System.out.println("Compress PDF.");
  }

  @Override
  public void do(WordFile wordFile) {
    System.out.println("Compress WORD.");
  }

}

public class ToolApplication {

  // 依赖注入
  private Extractor extractor;
  private Compressor compressor;

  public static void main(String[] args) {
    List<ResourceFile> resourceFiles = listAllResourceFiles(args[0]);

    for (ResourceFile resourceFile : resourceFiles) {
      resourceFile.accept(extractor);
    }
    for(ResourceFile resourceFile : resourceFiles) {
      resourceFile.accept(compressor);
    }
  }

  private static List<ResourceFile> listAllResourceFiles(String resourceDirectory) {
    List<ResourceFile> resourceFiles = new ArrayList<>();
    resourceFiles.add(new PdfFile("a.pdf"));
    resourceFiles.add(new WordFile("b.word"));
    resourceFiles.add(new PPTFile("c.ppt"));
    return resourceFiles;
  }

}
```