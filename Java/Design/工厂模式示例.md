## 工厂模式示例

> 仅列出常见工厂模式写法

```java
public interface IConfigParser {
    // do something...
}
public class JsonConfigParser implements IConfigParser {
    // do something...
}
public class XmlConfigParser implements IConfigParser {
    // do something...
}
```

### 简单工厂
```java
public class ConfigParserFactory {
    public static IConfigParser createParser(String configFormat) {
        IConfigParser parser = null;
        if ("json".equalsIgnoreCase(configFormat)) {
            parser = new JsonConfigParser();
        } else if ("xml".equalsIgnoreCase(configFormat)) {
            parser = new XmlConfigParser();
        }
        // else if ...
        return parser;
    }
}
```
```java
public class ConfigParserFactory {
    private static final Map<String, IConfigParser> cachedParsers = new HashMap<>();

    static {
        cachedParsers.put("json", new JsonConfigParser());
        cachedParsers.put("xml", new XmlConfigParser());
    }

    public static IConfigParser createParser(String configFormat) {
        if (configFormat == null || configFormat.isEmpty()) {
            throw new IllegalArgumentException();
        }
        IConfigParser parser = cachedParsers.get(configFormat);
        return parser;
    }
}
```

### 工厂方法

```java
public interface IConfigParserFactory {
  IConfigParser createParser();
}

public class JsonConfigParserFactory implements IConfigParserFactory {
  @Override
  public IConfigParser createParser() {
    return new JsonConfigParser();
  }
}

public class XmlConfigParserFactory implements IConfigParserFactory {
  @Override
  public IConfigParser createParser() {
    return new XmlConfigParser();
  }
}
```

> ps.  
> 如果工厂方法使用时觉得更复杂,  
> 可以为工厂类再创建一个简单工厂, 也就是工厂的工厂, 用来创建工厂类对象.  

### 抽象工厂

抽象工厂只是为了一些特殊的场景衍生出来的模式.  
可以让一个工厂负责创建多个类型的对象, 这样既能减少工厂数量, 也可以更好的配合场景.  
```java
public interface IConfigParserFactory {
  IConfigAParser createAParser();
  IConfigBParser createBParser();
}
```


